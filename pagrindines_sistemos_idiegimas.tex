\chapter{Pagrindinės sistemos įdiegimas}
  \section{Naujausios įdiegimo laikmenos gavimas}

  Arch Linux oficialią įdiegimo laikmeną galite gauti iš
  \textsl{http://archlinux.org/download}. Vadovo rašymo metu,
  naujausia versija yra 2010.05.
  \begin{itemize}
    \item Tiek \textsl{Core} tiek \textsl{Netinstall} atvaizdai
      suteikia tik pagrindinę sistemą. Verta pastebėti, jog
      pagrindinėje Arch Linux sistemoje nėra jokios grafinės
      aplinkos. Pagrindinė sistema susideda iš GNU įrankių grandinės ( kompiliatoriaus,
      asmeblerio, linkerio, kt. ), Linux branduolio ir kelių papildomų
      bibliotekų ir modulių.
    \item Įdiegimas yra palengvintas tiek \textsl{Core}, tiek
      \textsl{Netinstall} atvaizduose.
    \item \textsl{Netinstall} atvaizdas yra mažesnis, bet jame
      visiškai nėra pagrindinės sistemos paketų. Visa sistema yra
      parsiunčiama iš interneto.
  \end{itemize}

  \section{Sistemos įdiegimas iš egzistuojančios GNU/Linux
    distribucijos}

  Arch Linux yra pakankamai lankstus, kad galėtų būti įdiegtas iš
  kitos, egzistuojančios distribucijos į laisvą patriciją arba iš Live
  CD.
  Įdiegimą iš egzistuojančios GNU/Linux distribucijos apžvelgsime
  vadovo pabaigoje.

  % TODO:
  % http://wiki.archlinux.org/index.php/Install_from_Existing_Linux

  \section{Įdiegimas iš CD laikmenos}
  
  Iškepkite atsiųstą .iso atvaizdą į CD arba DVD su mėgstama CD/DVD
  rašymo programa ir tęskite savo kelią į kitą skyrių \textsl{Arch
    Linux įdiegimo krovimas}

  \section{Diegimas iš Flash atminties kortelės arba USB atmintinės}

  Sekantis metodas veiks bet kokiam Flash atminties tipui, kurį BIOS
  leis krauti paleidimo metu, būtų tai kortelių skaitytuvas arba USB
  portas.

  \paragraph{UNIX Metodas}
  
  Įdėkite tuščią arba nereikalingą flash laikmeną, nustatykite iki jos
  kelią ir įrašykite .iso atvaizdą, pasitelkus \textsl{/bin/dd}
  programą:

  \begin{verbatim}
dd if=archlinux-2010.05-{core|netinstall}-{i686|x86_64|dual}.iso\
  of=/dev/sdx
  \end{verbatim}

  kur $if=$ yra kelias iki atvaizdo failo ir $of=$ yra kelias iki Jūsų
  flash laikmenos. Įsitikinkite, kad naudojate \textsl{/dev/sdx}, o ne
  \textsl{/dev/sdx1}. Jums reikės flash atminties tiek, kad joje
  tilptų 381MB duomenų.

  \paragraph{Patikrinkite md5sum}

  Pasižymėkite koks buvo įrašų (blokų) skaičius, kai buvo rašoma į
  laikmeną. Tuomet galima patikrinti:

  \begin{verbatim}
dd if=/dev/sdx count=irasu_skaicius status=noxfer | md5sum
  \end{verbatim}

  Patikrinimo kodas turi sutapti su parsiųsto atvaizdo md5sum.

  %TODO: Microsoft Windows Method

  \section{Arch Linux įdiegimo krovimas}
  
  Įdėkite CD ar Flash laikmeną, perkraukit kompiuterį ir paleiskite
  sistema iš CD ar Flash laikmenos. Jums gali prireikti pakeisti
  krovimosi eiliškumą BIOS nustatymuose arba paspausti kažkokį
  mygtuką. Dažniausiai toks mygtukas būna DEL, F1, F2, F11 arba
  F12. Pabandykite paspausti vieną iš jų, kuomet BIOS yra POST ( Power
  On Self-Test ) režime.

  Pastaba: Atminties reikalavimai baziniam įdiegimui yra tokie:
  \begin{itemize}
    \item \textsl{Core} : 128 MB RAM x86$\_$64/i686 ( pažymėti visi
      paketai, su swap particija )
    \item \textsl{Netinstall} : 128 MB RAM x86$\_$64/i686 ( pažymėti
      visi paketai, su swap particija )
  \end{itemize}

  Šiame žingsnyje turėtų pasirodyti pagrindinis menu. Pasirinkite
  Jums reikalingą opciją klaviatūros navigaciniais mygtukais ir padarę
  pasirinkimą paspauskite 'Enter' mygtuką.

  Dažniausiai, pirmą kartą kraunant Arch Linux \textsl{Boot Archlive}
  yra tas pasirinkimas, kurio Jums reikia. Tačiau, jeigu turite bėdų
  su libata/PATA arba neturite SATA (Serial ATA), pasirinkite
  \textsl{Boot Archlive [legacy IDE]}.

  Norint pakeisti GRUB pasirinkimus, paspauskite raidę
  \textbf{e}. Dauguma vartotojų norės pakeisti framebuffer
  rezoliuciją, patogesniam darbui. Pridėkite:
  \begin{verbatim}
vga=773
  \end{verbatim}
  kernelio eilutėje. Tuomet paspauskite \textbf{Enter} mygtuką, kad
  įgalinti 1024x768 framebuffer rezoliuciją. Kuomet viskas bus
  padaryta, paspauskite \textbf{b} mygtuką, kad pradėti sistemos
  krovimą.

  Dabar sistema turi pradėti krautis. Kuomet sistema pilnai pasikraus,
  turėtų pasirodyti prisijungimo galimybė. Prisijunkite kaip
  \textsl{root} vartotojas, kadangi Archlive diske iš \textsl{root}
  vartotojo nereikalaujama slaptažodžio.

  \paragraph{Klaviatūros išdėstymo keitimas}

  Jeigu turite ne US klaviatūros išdėstymą, tuomet Jums reikia ją
  pasikeisti. Tai galima atlikti su \textsl{km} komanda:
  \begin{verbatim}
km
  \end{verbatim}
  arba panaudoti \textsl{loadkeys} komandą:
  \begin{verbatim}
loadkeys layout
  \end{verbatim}
  ( pakeiskite \textsl{layout} su Jūsų pasirinktu klaviatūros
  išdėstymu ).

  Dauguma lietuviškų klaviatūrų yra US standarto su papildomais
  lietuviškais simboliais, kurie pasirodo vietoj skaičių eilės,
  esančios virš \textsl{q,w,e,r,t,y,u,i,o,p} klavišų eilės. Tai
  reiškia, kad daugumoje atveju, Jums visiškai nereikia keisti
  klaviatūros išdėstymo.

  \paragraph{Dokumentacija}

  Oficialus įdiegimo vadovas yra pasiekiamas iškarto diske. Norint jį
  pasiekti, persijunkite į kitą konsolę ( ALT+F2 ) ir tuomet surinkite
  tokią komandą:
  \begin{verbatim}
less /usr/share/aif/docs/official_installlation_guide_en
  \end{verbatim}

  \textsl{Less} komanda leis Jums peržvelgti visą vadovą
  puslapiais. Norint persijungti atgal į įdiegimą, tiesiog paspauskite
  Alt+F1 ir grįšite į pirmą konsolę, kurioje yra vykdomas įdiegimas.

  Prireikus vėl paskaityti dokumentaciją, tiesiog persijunkite į antrą
  terminalą su Alt+F2, norint grįžti prie įdiegimo - Alt+F1.

  Pastaba: Įsidėmėkite, kad oficialus įdiegimo vadovas apžvelgia tik
  pagrindinės sistemos įdiegimą ir konfigūravimą. Kai tik su
  pagrindine sistema yra susitvarkyta, rekomenduojama grįžti prie
  detalesnio vadovo, kuriame yra aprašyti visi reikalingi žingsniai po
  įdiegimo.

  \section{Įdiegimo paleidimas}

  Kuomet esate prisijungė kaip \textsl{root} vartotojas, pirmame
  terminale galite paleisti įdiegimo skriptą:
  \begin{verbatim}
/arch/setup
  \end{verbatim}

  \subsection{Įdiegimo šaltinio pasirinkimas}

  Po pasisveikinimo, Jūsų paprašys pasirinkti įdiegimo
  šaltinį. Priklausomai nuo ankstesnės laikmenos pasirinkimo,
  atitinkamai pasirinkite ir įdiegimo šaltinį.
  \begin{itemize}
    \item Jeigu pasirinkote \textsl{Core} įdiegimo atvaizdą, tęskite
      toliau prie skyriaus \textsl{Laikrodžio nustatymas}
    \item Jeigu pasirinkote \textsl{Netinstall}, Jums reiks rankiniu
      būdu užkrauti tinklo plokštės tvarkykles ( žinoma, jeigu sistema
      automatiškai neaptiks Jūsų turimos įrangos ). Udev yra labai
      naudingas įrankis, norint sužinoti Jūsų turimą įrangą. Tai
      galima patikrinti, pasitelkus \textsl{ifconfig -a} komandą.
  \end{itemize}

  \paragraph{Tinklo konfigūravimas (Netinstall)}

  Šitam žingsnyje, sistema turi parodyti jos rastus tinklo
  sąsajas. Jeigu sąsaja ir HWaddr ( HardWare address ) yra sąraše,
  tuomet Jūsų tinklo plokštė buvo sėkmingai aptikta ir jos tvarkyklės
  sėkmingai įkrautos į branduolį. Jeigu Jūsų tinklo plokštė atpažinta
  nebuvo, tuomet Jums reikia rankiniu būdu kelti tvarkykles į
  branduolį kitoje konsolėje.

  Atsiradus panašiam langui, bus paprašyta pasirinkti \textsl{sąsają},
  \textsl{zondą} arba \textsl{Atšaukti}. Pasirinkite reikiamą
  \textsl{sąsają} ir tęskite.

  Paskui įdiegimo programa paklaus Jūsų ar Jūs norite naudoti
  \textsl{DHCP}. Pasirinkus \textsl{Yes}, įdiegimo programa paleis
  \textbf{dhcpcd}, kuri aptiks tinklo sąsaja ir iš sąsajos reikalaus
  IP adreso. Jeigu pasirinksite \textsl{No}, tuomet įdiegimo programa
  paprašys Jūsų įvesti statišką IP, tinklo kaukę, transliatorių,
  tinklo sąsajos DNS IP, HTTP ir FTP proxy. Paskutiniame žingsnyje
  sistema parodys gautus nustatymus. Šitame žingsnyje galite patikrinti
  ar visi nustatymai yra teisingi.

  \paragraph{Greitasis (A)DSL paleidimas}

  ( Jeigu turite modemą arba routerį tilto režime, jungiantis per ISP
  jungtį )

  Persijunkite į kitą konsolę ( ALT+F2 ), prisijunkite kaip
  \textsl{root} vartotojas ir rašykite:

  \begin{verbatim}
pppoe-setup
  \end{verbatim}

  Jeigu viskas sukonfigūruota teisingai, pabaigoje galite prisijungti
  prie savo ISP su:

  \begin{verbatim}
pppoe-start
  \end{verbatim}

  Grįžkite į pirmą konsolę ( ALT+F1 ) ir tęskite įdiegimą
  \textsl{Laikrodžio nustatymas} skyriuje.

  \paragraph{Greitasis bevielio tinklo paleidimas}

  ( Jeigu turite bevielio ryšio galimybę įdiegimo metu )

  Šiuo metu bevielio ryšio tvarkyklės yra pasiekiamos ir iš įdiegimo
  aplinkos atvaizdo. Geras savo bevielio įrangos žinojimas šiuo atveju
  Jums labai padės. Įsidėmėkite, jog sekantys nustatymai galios tik
  dabartinėje aplinkoje. Kuomet baigsite įdiegimą, visus nustatymus
  reiks pakartoti įdiegtoje sistemoje, norint ir toliau naudotis
  bevieliu ryšiu.

  Taip pat verta pastebėti, jog šie žingsniai nėra privalomi, jeigu
  įdiegimas yra įmanomas ir be bevielio tinklo. Bevielio tinklo
  konfigūravimas gali būti atliktas ir po įdiegimo pabaigos, jau
  įdiegtoje sistemoje.

  Pagrindiniai žingsniai būtų tokie:

  \begin{itemize}
    \item Persijunkite į laisvą konsolę ( pavyzdžiui 3, ALT+F3 );
    \item Prisijunkite kaip \textsl{root} vartotojas;
    \item ( Nebūtina ) Identifikuokite savo bevielio ryšio sąsają:
      \begin{verbatim}
lspci | grep -i net
      \end{verbatim}
    \item Įsitikinkite, kad \textsl{udev} atpažino bevielio ryšio
      kortą ir pakrovė į branduolį reikalingus modulius. Tai galima
      patikrinti su \textsl{/usr/bin/iwconfig} komanda:
\begin{verbatim}
iwconfig
\end{verbatim}
      Rezultatas turėtų būti kažkas panašaus:
\begin{verbatim}
lo no wireless extensions.
eth0 no wireless extensions.
wlan0    unassociated  ESSID:""
         Mode:Managed  Channel=0  Access Point: Not-Associated   
         Bit Rate:0 kb/s   Tx-Power=20 dBm   Sensitivity=8/0  
         Retry limit:7   RTS thr:off   Fragment thr:off
         Power Management:off
         Link Quality:0  Signal level:0  Noise level:0
         Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
         Tx excessive retries:0  Invalid misc:0   Missed beacon:0
\end{verbatim}
      Šiame pavyzdyje, \textsl{wlan0} ir bus bevielio ryšio sąsają,
      per kurią galima jungtis prie bevielio tinklo.
    \item Sekantis žingsnis būtų įgalinti sąsają su
      \textsl{/sbin/ifconfig <sąsaja> up} komanda.
      Pavyzdys, turint \textsl{wlan0} sąsają:
\begin{verbatim}
ifconfig wlan0 up
\end{verbatim}
      Įsidėmėkite, jog Jūsų sąsajos pavadinimas gali būti kitoks, negu
      \textsl{wlan0}. Priklausomai nuo modulio, kurį užkrovė
      \textsl{udev}, Jūsų sąsajos pavadinimas gali būti
      \textsl{wlan0}, \textsl{eth1}, kt.

    \item Jeigu nežinote tiksliai savo bevielio tinklo \textsl{essid}
      arba norite pasijungti prie Jums nežinomo bevielio tinklo,
      naudokite \textsl{/sbin/iwlist <sąsaja> scan} komanda. 
\begin{verbatim}
iwlist wlan0 scan
\end{verbatim}
      Šį komanda peržvelgs šiuo metu pasiekiamus bevielio ryšio
      tinklus.
    \item Sekantis žingsnis būtų nurodyti Jūsų bevielio tinklo sąsajai
      tinklo \textsl{essid}. Priklausomai nuo bevielio tinklo kodavimo
      algoritmo (WEP, WPA arba išvis jokio), nurodymo procedūra gali
      skirtis. Pavyzdžiui galima padaryti prielaidą, jog Jūs norite
      prisijungti prie \textsl{atviras-tinklas};
    \item Jeigu tinklas nekoduojamas:
\begin{verbatim}
iwconfig wlan0 essid "atviras-tinklas"
\end{verbatim}
    \item Jeigu tinkle naudojamas WEP kodavimas su aštuntainiu
      apsaugos kodu:
\begin{verbatim}
iwconfig wlan0 essid "atviras-tinklas" key 25dfb2575a
\end{verbatim}
    \item Jeigu tinkle naudojamas WEP kodavimas su ASCII slaptažodžiu:
\begin{verbatim}
iwconfig wlan0 essid "atviras-tinklas" key s:slaptaszodis
\end{verbatim}
    \item Tinkle naudojant WPA, prisijungimo procedūra šiek tiek
      tampa sudėtingesne. Vėliau tokius pat rezultatus galima pasiekti
      pasitelkiant \textsl{netcfg} įrankį. Tolesnės komandos sugeneruos Jums
      konfigūracinius failus ir pabandys prisijungti prie tinklo:
\begin{verbatim}
wpa_passphrase atviras-tinklas "slaptazodis" >>/etc/wpa_supplicant.conf
wpa_supplicant -B -Dwext -i wlan0 -c /etc/wpa_supplicant.conf
\end{verbatim}
      Verta pastebėti, jog antra komandai reikia žinoti kokias
      tvarkykles naudoja bevielio tinklo sąsaja. Šiuo atvėju tai
      \textsl{wext}. Prieš rašant šią komanda verta patikrinti kokias
      tvarkykles į branduolį įkrovė \textsl{udev}.
    \item Patikrinti ar visas procesas įvyko sėkmingai galima su:
\begin{verbatim}
iwconfig wlan0
\end{verbatim}
    \item Toliau sekantis žingsnis būtų paprašyti bevielio tinklo
      prisijungti su \textsl{/sbin/dhcpcd <sąsaja>}. Pavyzdžiui:
\begin{verbatim}
dhcpcd wlan0
\end{verbatim}
      Norint pamatyti kreipimosi detales, galima pridėti \textsl{-d}
      opciją ir \textsl{dhcpcd} parodys visus savo žingsnius:
\begin{verbatim}
dhcpcd -d wlan0
\end{verbatim}
    \item Paskutinis žingsnis būtų patikrinti ar dhcpcd sėkmingai
      sujungė su bevielio tinklo maršrutizatoriumi ir Jūs turit
      internetą:
\begin{verbatim}
ping -c 3 www.google.lt
\end{verbatim}
      
  \end{itemize}

Dabar Jūs jau turėtumėt būti prisijungę prie interneto ir dabar galite
sėkmingai tęsti Arch Linux įdiegimą į Jūsų kompiuterį, naudojantis
\textsl{Netinstall } atvaizdą.

\paragraph{Ar mano bevielio tinklo korta reikalauja Firmware?}

Labai mažas bevielio tinklo kortų, kartu su tvarkyklėmis, reikalauja
ir firmware. Tai galima patikrinti su \textsl{/usr/bin/dmesg}
komanda. 
\begin{verbatim}
dmesg | grep firmware
\end{verbatim}
Kaip pavyzdį galima paimti Intel kortas, kurios reikalauja naudoti
kartu su tvarkyklėmis ir firmwarą:
\begin{verbatim}
firmware: requesting iwlwifi-5000-1.ucode
\end{verbatim}
Jeigu \textsl{dmesg} komanda nieko neparodė, vadinasi, Jūsų korta
nereikalauja jokio firmware.

\section{Laikrodžio nustatymas}

Konfigūruojat sistemą įdiegimo metu, Jūsų bus paprašyta pasirinkti
laikrodžio konfigūracijos tipą. Yra du laikrodžio konfigūracijos
tipai: UTC ir localtime.

\begin{itemize}
  \item Pasirinkite UTC, jeigu Jūsų kompiuteryje veikia tik
    \textsl{unix} tipo operacinės sistemos.
  \item Pasirinkite localtime, jeigu Jūsų kompiuteryje veikia ir kito
    tipo operacinės sistemos ( pavyzdžiui Windows 7 ).
\end{itemize}

\section{Kietojo disko paruošimas}

\paragraph{Svarbu}

Kietojo disko skaldymo procesas gali negrįžtamai pašalinti visus
duomenys, esančius diske. Tęsiant sekančius žingsnius, patariama
padaryti atsarginę visų Jums svarbių duomenų kopiją kitoje laikmenoje. 

\paragraph{Svarbu}

Sekančiuose žingsniuose pasirinkus ``Cancel'' kietojo disko paruošimas
nenutrūks. Norint nutraukti kietojo disko paruošimo procedūrą, reikia
visiškai išeiti iš įdiegimo. Tai galima padaryti \textsl{Ctrl+C}
komanda. Tik tokiu atveju visi procesai bus sustabdyti ir Jūsų
kietasis diskas liks nepakitęs.

\paragraph{Pastaba}

Visiškai nebūtina ruošti diską Arch Linux įdiegimui iš Arch Linux
įdiegimo atvaizdo. Tai galima atlikti ir iš kitos distribucijos ar net
Windows operacinės sistemos, pasitelkus disko paruošimo įrankius,
tokius kaip \textsl{Gparter} ir kt. Jeigu diskas buvo suskaldytas ir
paruoštas ankščiau, galite tęsti \textsl{Failų sistemos pajungimas}
temoje.\\

Patikrinkite, jog sistema atpažino Jūsų diską ir jo architektūra,
pasitelkiant \textsl{/sbin/fdisk} komanda su \textsl{-l} opcija.

Persijunkite į kitą konsolę ( Alt+F3 ) ir įveskite

\begin{verbatim}
fdisk -l
\end{verbatim}

Visai gerai būtų įsiminti kokius disko skirsnius Jūs norite skirti
Arch Linux sistemai. Dar geriau būtų - užsirašyti.

Persijunkite atgal į Arch Linux įdiegimą ( Alt+F1 )

Pasirinkite patį pirmą menu įrašą ``Prepare Hard Drive''.

\begin{itemize}
  \item 1 pasirinkimas: ``Auto Prepare''.\\
    ``Auto Prepare'' suskirsto Jūsų diską tokia architektūra:
    \begin{itemize}
      \item \textsl{/boot} skirstinys su \textsl{ext2} failų
        sistema. Numatytas dydis yra 32MB. Sistema gali suteikti Jums
        galimybę pakeisti /boot skirstinio dydį.
        Jeigu planuojate turėti daug branduolių, sveika pasirinkti
        šiek tiek daugiau ir dar plius kažkiek atsargai ( Tarkim 500MB
        ).
      \item \textsl{swap} skirstinys. Numatytas skirstinio dydis yra
        256MB. Sistema gali suteikti Jums galimybę pakeisti
        \textsf{swap} skirstinio dydį. Rekomenduojamas \textsl{swap}
        skirstinio dydis: \textsl{turimas Ram atminties kiekis} x 2
      \item Atskiri \textsl{/} ir \textsl{/home} skirstiniai, kurių
        dydžius taip pat galima keisti. Galima pasirinkti iš sekančių
        failų sistemos tipų: \textsl{ext2}, \textsl{ext3}, \textsl{ext4},
        \textsl{reiserfs}, \textsl{xfs} ir
        \textsl{jfs}. Rekomenduojama pasirinkti tokias pat failų
        sistemas tiek \textsl{/}, tiek \textsl{/home} skirstiniams.
    \end{itemize}
    Verta pastebėti, jog ``Auto Prepare'' visiškai pertvarkys turimą
    diską, t.y. ištrins visą informaciją ir visiškai perrašys disko
    architektūrą.

    \paragraph{Pastaba}

    ``Auto Prepare'' siūloma pasirinkti tiems, kurie pirmą kartą
    įdieginėja Arch Linux sistemą, pirmą kart mato
    \textsl{/sbin/fdisk} ir labai bijo . Vėliau, šiek tiek įgudus, sistemą
    vėlgi galima bus iš naujo įdiegti, tik šiuo atveju protingai
    suskirstyti diskų skirstinius.

  \item 2 pasirinkimas: ``Partition Hard Drives'' ( su \textsl{cfdisk}
    )

    Šitas pasirinkimas leis keisti diskų architektūrą ir skirstinių
    tipus taip, kaip nori vartotojas.

    Tie vartotojai, kurie jau yra pažįstami su \textsl{cfdisk} ir
    disko skirstinių sudarymų, gali praleisti sekančia temą ir tęsti
    \textsl{Paketų pasirinkimas} temoje, kuri yra toliau.

\end{itemize}

\subsection{Kietojo disko skaldymas}

\paragraph{Skirstinio informacija}

Kietojo disko skaldymas sudaro diske tam tikras atminties sritis,
kurios vadinamos skirstiniais, kurie elgiasi kaip savarankiški diskai.

Yra trijų tipų skirstiniai:
\begin{itemize}
  \item Primary
  \item Extended
  \item Logical
\end{itemize}

\textsl{Primary} skirsiniai gali būti kraunamieji skirsiniai (
bootable ), tačiau jų skaičius yra limituotas iki 4 viename kietame
diske. Jeigu sistemoje reikalaujama turėti daugiau kaip 4 skirstinius,
tuomet reikia naudoti kitą skirstinio tipą - \textsl{extended}, kuris
susidės iš \textsl{logical} skistinių.

Pats \textsl{extended} skirstinys yra beveiksmis ir bevertis, kadangi
pats \textsl{extended} skirstinys yra kaip talpa kitiems
\textsl{logical} skirsiniams.

\paragraph{Swap skirstinys}

Swap skirstinys yra rezervuota kietojo disko talpa, kurią sisteminis
branduolys galės naudoti kaip `RAM` atmintį, jeigu realios `RAM`
atminties neužteks duotai užduočiai įvykdyti.

Istoriškai, pagrindinis swap skirstinio reikalavimas yra x2 realios
RAM atminties dydis. Bėgant laikui, šita taisyklė tampa neaktuali,
kadangi pagrindinės atminties dydis asmeniniuose kompiuteriuose labai
padidėjo. Šiuo metu, jeigu Jūsų kompiuteryje yra \textsl{512MB}
pagrindinės atminties - dar galima taikyti x2 taisyklę, tačiau, jeigu
Jūsų kompiuteryje yra \textsl{1024MB} atminties - apie swap skirstinį
galite net pamiršti. Kodėl? Kadangi visuomet lieka galimybė susikurti
ne swap skirstinį, o swap failą, kuris atlikt tą patį vaidmenį, ką
atlieka ir swap skirstinys.

Šiame vadove mes naudosime \textsl{1GB} swap skirstinį.

\paragraph{Pastaba} Jeigu planuojate naudoti suspend-to-disk
(hibernate) swap skirstinys turi būti mažų mažiausiai lygus RAM
atminties dydžiui. Kai kurie Arch vartotojai rekomenduoja swap
skirstinį padaryti 10-20 proc didesnį, palikti atsargą klaidos
atvejui.

\paragraph{Skirstinių schema}

Skirstinių schema yra labai asmeninis reikalas. Nėra vieningo,
numatyto geriausiu sprendimo skirstinių schemai. Kiekvieno vartotojo
skirstinių schema bus skirtingai pritaikyta pagal jo poreikius ir
darbo sistemos reikalavimus.

Skirstinius galima ``pririšti'' prie tam tikrų direktorijų. Galimos
direktorijos ir jų apibūdinimas:

\begin{itemize}
  \item \textbf{/} ( root ) Root failų sistema yra pagrindinė failų
    sistema, iš kurios seka kitos failų sistemos. Jinai yra failų
    sistemos hierarchijos viršūnėje. Kiekviena direktorija seka po
    \textbf{/}, netgi tuomet, kai kažkuri direktorija yra pririšta
    prie kito disko.
  \item \textbf{/boot} Direktorija saugoja sisteminį branduolį,
    ramdisk atvaizdus ir krovėjo ( grub )
    konfigūraciją. \textsl{/boot} saugo visą informaciją, kuri
    reikalinga branduoliui, prieš paleidžiant sistemą. Tokia
    informacija gali būti išsaugoti \textsl{master boot sectors} arba
    \textsl{sector map} failai. \textsl{/boot} yra naudojamas tik
    sistemos krovimuisi, tačiau \textsl{/boot} gali būti iškeltas ir į
    kitą disko skirstinio vietą.
  \item \textbf{/home} Suteikia pakatalogį, kurio kiekvienas vardas
    sutampa su sistemoje priregistravusiais vartotojų
    vardais. \textsl{/home} saugoma visa informacija, susijusi su
    vartotojo veikla, vartotojo asmeniniais duomenimis ir vartotojo
    programų nustatymais.
  \item \textbf{/usr} Šita direktorija pagal svarba eina iškarto po
    \textsl{/} ( root ) direktorijos. Joje yra saugoma tokia
    informacija, kuri pasiekiama visiems sistemoms vartotojams,
    įskaitant ir programas bei tvarkykles, kurias gali naudoti iškarto
    keli vartotojai. \textsl{/usr} yra sistemiškai prieinama, tačiau
    ją galima tik skaityti. Tai leidžia suteikti prieigą tinkle
    esančiam vartotojui pasiekti \textsl{/usr} direktoriją, tačiau
    vartotojas negali tos informacijos perrašyti ar kitaip pakeisti.
  \item \textbf{/tmp} Direktorija atlieka ``laikinos failų saugyklos''
    vaidmenį. Kokia informacija gali būti laikina? Tai gali būti
    programų \textsl{užraktai} - '.lck' tipo failai, kurie yra
    naudojami sudarant sąlygas neleisti tai pačiai programai paleisti
    savo kopijas iš skirtinų vartotojų vienu metu. Visi duomenys iš
    \textsl{/tmp} yra pašalinami po kiekvieno sistemos užkrovimo.
  \item \textbf{/var} Direktorija saugo savyje visą informaciją apie
    kintamuosius: \textsl{spool} direktorijas ir failus,
    administravimo ir žurnalo ( log ) failus, \textsl{pacman} puodynę,
    ABS medį ir kt. Taip pat \textsl{/var} atlieka svarbų vaidmenį -
    suteikia galimybę užkrauti \textsl{/usr} skaitymo režime. Viskas,
    kas istoriškai buvo talpinama \textsl{/usr} direktorijoje,
    priklausė nuo \textsl{/var} direktorijos.
\end{itemize}

Kiekvienam vartotojui gali iškilti klausimas - o kam man skaldyti
diską į skirstinius ir paskui ``pririšinėti'' direktorijas prie
atskirų skirstinių? Juk realiai galima padaryti du skirtinius - vienas
swap, kitas / ( root ) direktorijai ir viskas.

Taip, ir toks variantas yra įmanomas, tačiau, disko skaldymas ir
skirstinių pririšimas prie direktorijų turi savo privalumų:

\begin{itemize}
  \item Saugumas: Kiekviena direktorija \textsl{/etc/fstab} faile gali
    būti sukonfigūruota būti 'nosuid', 'nodev', 'noexec', 'readonly'
    ir kt.
  \item Stabilumas: Vartotojas, arba kvaila programa gali visiškai
    užteršti diską bereikalingą informaciją, arba kritiškai reikalinga
    informacija ( ypač \textsl{/boot} skirstinyje ) gali būti pažeista
    ir sistema daugiau pati neužsikraus. 
  \item Greitis: Failų sistema, į kurią yra rašoma labai dažnai, gali
    patapti fragmentiška ( Geriausias būdas išvengti tokios problemos,
    yra nuolat stebėti ar failų sistema neužima viso disko talpos
    ). Atskiros failų sistemos yra atskirtos ir tarpusavyje negali
    sąveikauti.
  \item Vientisumas: Jeigu viena failų sistema sugadinama - kitos
    lieka nepažeistos.
  \item Universalumas: Duomenų dalinimasis tarp kompiuterių tampa daug
    saugesnis, kuomet naudojami atskiri diskai duomenims perduoti. 
\end{itemize}

Šiame vadove, mes atskirsim \textsl{/}, \textsl{/var}, \textsl{/home}
ir \textsl{swap} skirstinius.

\paragraph{Pastaba} \textsl{/var} direktorija susideda iš daug ir mažų
failų. Į tai reikia atsižvelgti, renkantis failų sistemos tipą.

\paragraph{Kokie turi būti mano skirstinių dydžiai?}

Toks klausimas yra atsakomas kiekvieno atskirai. Paprasčiausiais
atvejais galima apsiriboti tik root ir swap skirstiniais, arba dar
paprasčiau - vien tik root skirtiniu, be swap. Taip pat galite
paeksperimentuoti ir pasirinkti tokią pat skirstinių ir direktorijų
architektūrą, kaip ir mūsų pavyzdyje:

\begin{itemize}
  \item Root failų sistema ( \textbf{/} ) turės savyje \textsl{/usr}
    direktorija, kuri yra gan didelė. Į tai turi būti
    atsižvelgta. Apie 15-20GB šiai direktorijai turėtų būti užtektinai
    kiekvienam vartotojui.
  \item \textbf{/var} failų sistema susidės iš daugybės duomenų, tarp
    kurių ir ABS medis, bei pacman puodynė. Paketų saugojimas
    kompiuteryje turi savo privalumų - bet kada galima įdiegti senesnę
    programos versiją. \textsl{/var} turi tendencija didėti - pacman
    puodynė didėja nuolatos ir jinai gali labai didelę po ilgo pacman
    naudojimo. Jeigu naudojate SSD tipo diską, patartiną perkelti
    \textsl{/var} direktoriją į HDD tipo diską, taip išsaugant SSD
    tipo diską nuo bereikalingų rašymo/skaitymo operacijų. Darbiniam
    kompiuteryje \textsl{/var} direktorijai galima skirti 8-12GB disko
    vietos. Serveriai pasižymi ypač dideliais \textsl{/var}
    direktorijos matmenimis.
  \item \textsl{/home} direktorija yra ta vieta, kur saugomi vartotojo
    asmeniniai duomenys, atsiųstas turinys ir kt. Darbiniame
    kompiuteryje, \textsl{/home} direktorija dažniausiai yra pati
    didžiausia. Verta prisiminti, jog jeigu Jūs iš naujo diegsite Arch
    Linux - Jums \textsl{/home} direktorija niekur nedings ( jeigu
    ``pririšote'' \textsl{/home} direktoriją prie kito skirstinio ).
  \item Kiekvieno disko dydžio 25 procentai nueina apsaugojimui nuo
    neprognozuotų atsitikimų, sistemos išplėtimo ir vaidins gerą
    priemonę prieš fragmentaciją.
\end{itemize}

\paragraph{Skirstinių kūrimas su cfdisk}

Pradėkite sukurdami naują skirstinį, kuris bus pririštas prie root
failų sistemos.

Pasirinkite \textbf{N}ew -> Primary ir įveskite norimą root failų
sistemos skirstinio dydį. Padėkite diską schemos pradžioje.
